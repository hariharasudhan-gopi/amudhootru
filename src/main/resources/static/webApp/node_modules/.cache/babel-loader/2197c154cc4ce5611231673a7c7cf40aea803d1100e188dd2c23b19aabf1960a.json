{"ast":null,"code":"import React from'react';import{Link,useNavigate}from'react-router-dom';import{useAuthentication}from'../context/Authentication';import{useField}from'../context/FieldList';import HashImageComponent from'../DynamicComponent/HashImageComponent';import HashCheckBoxComponent from'../DynamicComponent/HashCheckBoxComponent';import'./ProductPage.css';import BuyNowPage from'./BuyNowPage';import{useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProductPage=()=>{useEffect(()=>{const fetchProductsData=async()=>{try{const response=await axios.get(\"http://localhost:8080/products/getProducts\");const result=await response.data;var resultLen=result.length;for(var i=0;i<resultLen;i++){result[i].availableQantity=result[i].availablequantity;result[i].name=result[i].productname;result[i].imgUrl=result[i].imagesrc;}setProductList(result);}catch(err){debugger;}};fetchProductsData();},[]);const{isLoggedIn,isAdminProfile}=useAuthentication();const{cartItems,setCartItems,cartCount,listOfProducts,itemsToBuy,setItemsToBuy,productList,setProductList}=useField();var productMap={};productList.filter(function(prd){if(prd.imgUrl){var PrdDetail={\"name\":prd.name,\"imgComp\":prd.imgUrl};productMap[prd.id]=PrdDetail;}});const navigate=useNavigate();const goToEnquirePage=event=>{var sevciceId=event.target.className;if(isLoggedIn){navigate('/Enquire/'+sevciceId);}else{navigate('/Login');}};function handleAddToCart(event){var currentuserProfile=localStorage.getItem('currentUserProfile');currentuserProfile=JSON.parse(currentuserProfile);var userId=currentuserProfile.id;var product={\"userid\":userId,\"productname\":event.target.classList[0],\"status\":1};axios.post(\"http://localhost:8080/products/addToCart\",product).then(function(resp){alert(resp.data);if(!isLoggedIn){navigate('/Login');}}).catch(function(err){debugger;});// var productName = event.target.classList[0];\n// setCartItems((prevItems) => [...prevItems, productName]);\n// cartCount.current = cartCount.current + 1;\n// if(!isLoggedIn){\n//   navigate('/Login');\n// }\n}function handleRemoveFromCart(event){// var productName = event.target.classList[0];\n// setCartItems(cartItems.filter(item => item !== productName));\n// cartCount.current = cartCount.current - 1;\n}function handleBuyNow(event){// var productName = event.target.classList[0];\n// setItemsToBuy((prevItems) => [...prevItems, productName]);\n// event.target.closest('.productContainer').classList.add('disableProduct')\n}function handleRemoveItem(event){// var productName = event.target.classList[0];\n// var updatedProductList = productList.map((item) => item.id === productName ? { ...item, isNotAvailable: true } : item);\n// setProductList(updatedProductList);\n}function handleOutOfStock(event){// var productName = event.target.classList[0];\n// var updatedProductList = productList.map((item) => item.id === productName ? { ...item, isOutOfStock: true } : item);\n// setProductList(updatedProductList);\n}function handleMarkAsAvailable(event){// var productName = event.target.classList[0];\n// var updatedProductList = productList.map((item) => item.id === productName ? { ...item, isOutOfStock: false } : item);\n// setProductList(updatedProductList);\n}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Choose your product... \"}),/*#__PURE__*/_jsx(\"div\",{className:\"productsOuterContainer\",children:productList.map(item=>!item.isNotAvailable?/*#__PURE__*/_jsxs(\"div\",{className:'productContainer '+(itemsToBuy.includes(item.id)?'disableProduct':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"productTitle\",children:[itemsToBuy.includes(item.id)?/*#__PURE__*/_jsx(HashCheckBoxComponent,{fieldClass:item.id,isChecked:cartItems.includes(item.id)?\"true\":\"false\",type:\"checkbox\"}):null,/*#__PURE__*/_jsx(\"p\",{children:item.name})]}),/*#__PURE__*/_jsx(HashImageComponent,{fieldClass:\"productImage\",imageUrl:productMap[item.id].imgComp}),/*#__PURE__*/_jsx(\"button\",{className:item.id,onClick:goToEnquirePage,children:\"ViewDetails\"}),!isAdminProfile?/*#__PURE__*/_jsxs(\"div\",{className:\"buttonContainer\",children:[cartItems.includes(item.id)?/*#__PURE__*/_jsx(\"button\",{className:item.id,onClick:handleRemoveFromCart,children:\"RemoveFromCart\"}):/*#__PURE__*/_jsx(\"button\",{className:item.id,onClick:handleAddToCart,children:\"AddToCart\"}),/*#__PURE__*/_jsx(\"button\",{className:item.id,onClick:handleBuyNow,children:\"BuyNow\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:item.id,onClick:handleRemoveItem,children:\"RemoveItem\"}),!item.isOutOfStock?/*#__PURE__*/_jsx(\"button\",{className:item.id,onClick:handleOutOfStock,children:\"OutOfStock\"}):/*#__PURE__*/_jsx(\"button\",{className:item.id,onClick:handleMarkAsAvailable,children:\"MarkAsAvailable\"})]})]}):null)}),itemsToBuy.length>0?/*#__PURE__*/_jsx(BuyNowPage,{}):null]});};export default ProductPage;","map":{"version":3,"names":["React","Link","useNavigate","useAuthentication","useField","HashImageComponent","HashCheckBoxComponent","BuyNowPage","useEffect","axios","jsx","_jsx","jsxs","_jsxs","ProductPage","fetchProductsData","response","get","result","data","resultLen","length","i","availableQantity","availablequantity","name","productname","imgUrl","imagesrc","setProductList","err","isLoggedIn","isAdminProfile","cartItems","setCartItems","cartCount","listOfProducts","itemsToBuy","setItemsToBuy","productList","productMap","filter","prd","PrdDetail","id","navigate","goToEnquirePage","event","sevciceId","target","className","handleAddToCart","currentuserProfile","localStorage","getItem","JSON","parse","userId","product","classList","post","then","resp","alert","catch","handleRemoveFromCart","handleBuyNow","handleRemoveItem","handleOutOfStock","handleMarkAsAvailable","children","map","item","isNotAvailable","includes","fieldClass","isChecked","type","imageUrl","imgComp","onClick","isOutOfStock"],"sources":["/Users/siva-15837/Desktop/thulir/src/main/resources/static/webApp/src/Content/ProductPage.js"],"sourcesContent":["import React from 'react'\nimport { Link, useNavigate } from 'react-router-dom'\nimport { useAuthentication } from '../context/Authentication'\nimport { useField } from '../context/FieldList'\nimport HashImageComponent from '../DynamicComponent/HashImageComponent'\nimport HashCheckBoxComponent from '../DynamicComponent/HashCheckBoxComponent'\nimport './ProductPage.css'\nimport BuyNowPage from './BuyNowPage'\nimport { useEffect } from 'react';\nimport axios from 'axios';\n\n\nconst ProductPage = () => {\n\n  useEffect(() => {\n    const fetchProductsData = async () => {\n      try {\n        const response = await axios.get(\"http://localhost:8080/products/getProducts\");\n        const result = await response.data;\n        var resultLen = result.length;\n        for(var i = 0; i < resultLen; i++){\n          result[i].availableQantity = result[i].availablequantity;\n          result[i].name = result[i].productname;\n          result[i].imgUrl = result[i].imagesrc;\n        }\n        setProductList(result);\n      } catch (err) {\n        debugger\n      }\n    };\n\n    fetchProductsData();\n  }, []);\n\n  const {isLoggedIn,isAdminProfile} = useAuthentication();\n  const {cartItems,setCartItems,cartCount,listOfProducts,itemsToBuy,setItemsToBuy,productList,setProductList} = useField();\n  \n  var productMap = {}\n  \n  productList.filter(function(prd){\n    if(prd.imgUrl){\n      var PrdDetail = {\"name\" : prd.name, \"imgComp\" : prd.imgUrl};\n      productMap[prd.id] = PrdDetail;\n    }\n  })\n  \n  const navigate = useNavigate();\n  const goToEnquirePage = (event) => {\n    var sevciceId = event.target.className;\n    if(isLoggedIn){\n      navigate('/Enquire/'+sevciceId);\n    }else{\n      navigate('/Login');\n    }\n  }\n  function handleAddToCart(event){\n    var currentuserProfile = localStorage.getItem('currentUserProfile');\n    currentuserProfile = JSON.parse(currentuserProfile);\n    var userId = currentuserProfile.id;\n    var product = {\n      \"userid\"      : userId,\n      \"productname\" : event.target.classList[0],\n      \"status\"      : 1\n    }\n    axios.post(\"http://localhost:8080/products/addToCart\", product).then(function(resp){\n      alert(resp.data);\n      if(!isLoggedIn){\n        navigate('/Login');\n      }\n    }).catch(function(err){\n      debugger\n    })\n    // var productName = event.target.classList[0];\n    // setCartItems((prevItems) => [...prevItems, productName]);\n    // cartCount.current = cartCount.current + 1;\n    // if(!isLoggedIn){\n    //   navigate('/Login');\n    // }\n  }\n  function handleRemoveFromCart(event){\n    // var productName = event.target.classList[0];\n    // setCartItems(cartItems.filter(item => item !== productName));\n    // cartCount.current = cartCount.current - 1;\n  }\n  function handleBuyNow(event){\n    // var productName = event.target.classList[0];\n    // setItemsToBuy((prevItems) => [...prevItems, productName]);\n    // event.target.closest('.productContainer').classList.add('disableProduct')\n  }\n  function handleRemoveItem(event){\n    // var productName = event.target.classList[0];\n    // var updatedProductList = productList.map((item) => item.id === productName ? { ...item, isNotAvailable: true } : item);\n    // setProductList(updatedProductList);\n  }\n  function handleOutOfStock(event){\n    // var productName = event.target.classList[0];\n    // var updatedProductList = productList.map((item) => item.id === productName ? { ...item, isOutOfStock: true } : item);\n    // setProductList(updatedProductList);\n  }\n  function handleMarkAsAvailable(event){\n    // var productName = event.target.classList[0];\n    // var updatedProductList = productList.map((item) => item.id === productName ? { ...item, isOutOfStock: false } : item);\n    // setProductList(updatedProductList);\n  }\n  \n  return (\n    <div>\n      <h1> Choose your product... </h1>\n      <div className='productsOuterContainer'>\n        {productList.map((item) => (\n          !item.isNotAvailable ? (<div className={'productContainer ' + (itemsToBuy.includes(item.id) ? 'disableProduct' : '')}>\n            <div className='productTitle'>\n              {itemsToBuy.includes(item.id) ? <HashCheckBoxComponent fieldClass={item.id} isChecked={cartItems.includes(item.id) ? \"true\" : \"false\"} type=\"checkbox\"></HashCheckBoxComponent> : null}\n              <p>{item.name}</p>\n            </div>\n            <HashImageComponent fieldClass= \"productImage\" imageUrl={productMap[item.id].imgComp}></HashImageComponent>\n            <button className = {item.id} onClick={goToEnquirePage}>ViewDetails</button>\n            {!isAdminProfile ? \n            (<div className='buttonContainer'>{cartItems.includes(item.id) ? <button className = {item.id} onClick={handleRemoveFromCart}>RemoveFromCart</button> : <button className = {item.id} onClick={handleAddToCart}>AddToCart</button>}\n              <button className = {item.id} onClick={handleBuyNow}>BuyNow</button></div>) \n            : ( <div>\n                  <button className = {item.id} onClick={handleRemoveItem}>RemoveItem</button>\n                  {!item.isOutOfStock ? <button className = {item.id} onClick={handleOutOfStock}>OutOfStock</button> : \n                                        <button className = {item.id} onClick={handleMarkAsAvailable}>MarkAsAvailable</button>  }\n                </div>)}\n          </div>) : null\n        ))}\n      </div>\n      {itemsToBuy.length > 0 ? <BuyNowPage></BuyNowPage> : null}\n    </div>\n  )\n}\n\nexport default ProductPage\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,iBAAiB,KAAQ,2BAA2B,CAC7D,OAASC,QAAQ,KAAQ,sBAAsB,CAC/C,MAAO,CAAAC,kBAAkB,KAAM,wCAAwC,CACvE,MAAO,CAAAC,qBAAqB,KAAM,2CAA2C,CAC7E,MAAO,mBAAmB,CAC1B,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,OAASC,SAAS,KAAQ,OAAO,CACjC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAG1B,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CAExBN,SAAS,CAAC,IAAM,CACd,KAAM,CAAAO,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAP,KAAK,CAACQ,GAAG,CAAC,4CAA4C,CAAC,CAC9E,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAF,QAAQ,CAACG,IAAI,CAClC,GAAI,CAAAC,SAAS,CAAGF,MAAM,CAACG,MAAM,CAC7B,IAAI,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGF,SAAS,CAAEE,CAAC,EAAE,CAAC,CAChCJ,MAAM,CAACI,CAAC,CAAC,CAACC,gBAAgB,CAAGL,MAAM,CAACI,CAAC,CAAC,CAACE,iBAAiB,CACxDN,MAAM,CAACI,CAAC,CAAC,CAACG,IAAI,CAAGP,MAAM,CAACI,CAAC,CAAC,CAACI,WAAW,CACtCR,MAAM,CAACI,CAAC,CAAC,CAACK,MAAM,CAAGT,MAAM,CAACI,CAAC,CAAC,CAACM,QAAQ,CACvC,CACAC,cAAc,CAACX,MAAM,CAAC,CACxB,CAAE,MAAOY,GAAG,CAAE,CACZ,SACF,CACF,CAAC,CAEDf,iBAAiB,CAAC,CAAC,CACrB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAACgB,UAAU,CAACC,cAAc,CAAC,CAAG7B,iBAAiB,CAAC,CAAC,CACvD,KAAM,CAAC8B,SAAS,CAACC,YAAY,CAACC,SAAS,CAACC,cAAc,CAACC,UAAU,CAACC,aAAa,CAACC,WAAW,CAACV,cAAc,CAAC,CAAGzB,QAAQ,CAAC,CAAC,CAExH,GAAI,CAAAoC,UAAU,CAAG,CAAC,CAAC,CAEnBD,WAAW,CAACE,MAAM,CAAC,SAASC,GAAG,CAAC,CAC9B,GAAGA,GAAG,CAACf,MAAM,CAAC,CACZ,GAAI,CAAAgB,SAAS,CAAG,CAAC,MAAM,CAAGD,GAAG,CAACjB,IAAI,CAAE,SAAS,CAAGiB,GAAG,CAACf,MAAM,CAAC,CAC3Da,UAAU,CAACE,GAAG,CAACE,EAAE,CAAC,CAAGD,SAAS,CAChC,CACF,CAAC,CAAC,CAEF,KAAM,CAAAE,QAAQ,CAAG3C,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAA4C,eAAe,CAAIC,KAAK,EAAK,CACjC,GAAI,CAAAC,SAAS,CAAGD,KAAK,CAACE,MAAM,CAACC,SAAS,CACtC,GAAGnB,UAAU,CAAC,CACZc,QAAQ,CAAC,WAAW,CAACG,SAAS,CAAC,CACjC,CAAC,IAAI,CACHH,QAAQ,CAAC,QAAQ,CAAC,CACpB,CACF,CAAC,CACD,QAAS,CAAAM,eAAeA,CAACJ,KAAK,CAAC,CAC7B,GAAI,CAAAK,kBAAkB,CAAGC,YAAY,CAACC,OAAO,CAAC,oBAAoB,CAAC,CACnEF,kBAAkB,CAAGG,IAAI,CAACC,KAAK,CAACJ,kBAAkB,CAAC,CACnD,GAAI,CAAAK,MAAM,CAAGL,kBAAkB,CAACR,EAAE,CAClC,GAAI,CAAAc,OAAO,CAAG,CACZ,QAAQ,CAAQD,MAAM,CACtB,aAAa,CAAGV,KAAK,CAACE,MAAM,CAACU,SAAS,CAAC,CAAC,CAAC,CACzC,QAAQ,CAAQ,CAClB,CAAC,CACDlD,KAAK,CAACmD,IAAI,CAAC,0CAA0C,CAAEF,OAAO,CAAC,CAACG,IAAI,CAAC,SAASC,IAAI,CAAC,CACjFC,KAAK,CAACD,IAAI,CAAC3C,IAAI,CAAC,CAChB,GAAG,CAACY,UAAU,CAAC,CACbc,QAAQ,CAAC,QAAQ,CAAC,CACpB,CACF,CAAC,CAAC,CAACmB,KAAK,CAAC,SAASlC,GAAG,CAAC,CACpB,SACF,CAAC,CAAC,CACF;AACA;AACA;AACA;AACA;AACA;AACF,CACA,QAAS,CAAAmC,oBAAoBA,CAAClB,KAAK,CAAC,CAClC;AACA;AACA;AAAA,CAEF,QAAS,CAAAmB,YAAYA,CAACnB,KAAK,CAAC,CAC1B;AACA;AACA;AAAA,CAEF,QAAS,CAAAoB,gBAAgBA,CAACpB,KAAK,CAAC,CAC9B;AACA;AACA;AAAA,CAEF,QAAS,CAAAqB,gBAAgBA,CAACrB,KAAK,CAAC,CAC9B;AACA;AACA;AAAA,CAEF,QAAS,CAAAsB,qBAAqBA,CAACtB,KAAK,CAAC,CACnC;AACA;AACA;AAAA,CAGF,mBACElC,KAAA,QAAAyD,QAAA,eACE3D,IAAA,OAAA2D,QAAA,CAAI,0BAAwB,CAAI,CAAC,cACjC3D,IAAA,QAAKuC,SAAS,CAAC,wBAAwB,CAAAoB,QAAA,CACpC/B,WAAW,CAACgC,GAAG,CAAEC,IAAI,EACpB,CAACA,IAAI,CAACC,cAAc,cAAI5D,KAAA,QAAKqC,SAAS,CAAE,mBAAmB,EAAIb,UAAU,CAACqC,QAAQ,CAACF,IAAI,CAAC5B,EAAE,CAAC,CAAG,gBAAgB,CAAG,EAAE,CAAE,CAAA0B,QAAA,eACnHzD,KAAA,QAAKqC,SAAS,CAAC,cAAc,CAAAoB,QAAA,EAC1BjC,UAAU,CAACqC,QAAQ,CAACF,IAAI,CAAC5B,EAAE,CAAC,cAAGjC,IAAA,CAACL,qBAAqB,EAACqE,UAAU,CAAEH,IAAI,CAAC5B,EAAG,CAACgC,SAAS,CAAE3C,SAAS,CAACyC,QAAQ,CAACF,IAAI,CAAC5B,EAAE,CAAC,CAAG,MAAM,CAAG,OAAQ,CAACiC,IAAI,CAAC,UAAU,CAAwB,CAAC,CAAG,IAAI,cACtLlE,IAAA,MAAA2D,QAAA,CAAIE,IAAI,CAAC/C,IAAI,CAAI,CAAC,EACf,CAAC,cACNd,IAAA,CAACN,kBAAkB,EAACsE,UAAU,CAAE,cAAc,CAACG,QAAQ,CAAEtC,UAAU,CAACgC,IAAI,CAAC5B,EAAE,CAAC,CAACmC,OAAQ,CAAqB,CAAC,cAC3GpE,IAAA,WAAQuC,SAAS,CAAIsB,IAAI,CAAC5B,EAAG,CAACoC,OAAO,CAAElC,eAAgB,CAAAwB,QAAA,CAAC,aAAW,CAAQ,CAAC,CAC3E,CAACtC,cAAc,cACfnB,KAAA,QAAKqC,SAAS,CAAC,iBAAiB,CAAAoB,QAAA,EAAErC,SAAS,CAACyC,QAAQ,CAACF,IAAI,CAAC5B,EAAE,CAAC,cAAGjC,IAAA,WAAQuC,SAAS,CAAIsB,IAAI,CAAC5B,EAAG,CAACoC,OAAO,CAAEf,oBAAqB,CAAAK,QAAA,CAAC,gBAAc,CAAQ,CAAC,cAAG3D,IAAA,WAAQuC,SAAS,CAAIsB,IAAI,CAAC5B,EAAG,CAACoC,OAAO,CAAE7B,eAAgB,CAAAmB,QAAA,CAAC,WAAS,CAAQ,CAAC,cAChO3D,IAAA,WAAQuC,SAAS,CAAIsB,IAAI,CAAC5B,EAAG,CAACoC,OAAO,CAAEd,YAAa,CAAAI,QAAA,CAAC,QAAM,CAAQ,CAAC,EAAK,CAAC,cACxEzD,KAAA,QAAAyD,QAAA,eACE3D,IAAA,WAAQuC,SAAS,CAAIsB,IAAI,CAAC5B,EAAG,CAACoC,OAAO,CAAEb,gBAAiB,CAAAG,QAAA,CAAC,YAAU,CAAQ,CAAC,CAC3E,CAACE,IAAI,CAACS,YAAY,cAAGtE,IAAA,WAAQuC,SAAS,CAAIsB,IAAI,CAAC5B,EAAG,CAACoC,OAAO,CAAEZ,gBAAiB,CAAAE,QAAA,CAAC,YAAU,CAAQ,CAAC,cAC5E3D,IAAA,WAAQuC,SAAS,CAAIsB,IAAI,CAAC5B,EAAG,CAACoC,OAAO,CAAEX,qBAAsB,CAAAC,QAAA,CAAC,iBAAe,CAAQ,CAAC,EACzG,CAAE,EACR,CAAC,CAAI,IACX,CAAC,CACC,CAAC,CACLjC,UAAU,CAAChB,MAAM,CAAG,CAAC,cAAGV,IAAA,CAACJ,UAAU,GAAa,CAAC,CAAG,IAAI,EACtD,CAAC,CAEV,CAAC,CAED,cAAe,CAAAO,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}